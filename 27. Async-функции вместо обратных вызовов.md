# Async-—Ñ—É–Ω–∫—Ü–∏–∏ –≤–º–µ—Å—Ç–æ –æ–±—Ä–∞—Ç–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `async`/`await` –≤–º–µ—Å—Ç–æ –æ–±—Ä–∞—Ç–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ (callback'–æ–≤) ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± —Å–¥–µ–ª–∞—Ç—å **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ –≤ TypeScript** –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–º, –±–µ–∑–æ–ø–∞—Å–Ω—ã–º –∏ —É–¥–æ–±–Ω—ã–º –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∏–ø–∞–º–∏.

–†–∞–∑–±–µ—Ä—ë–º—Å—è **–ø–æ-–ø—Ä–æ—Å—Ç–æ–º—É –∏ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏**:

---

## üîÅ –ß—Ç–æ —Ç–∞–∫–æ–µ "–æ–±—Ä–∞—Ç–Ω—ã–π –≤—ã–∑–æ–≤" (callback)?

–≠—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é —Ç—ã –ø–µ—Ä–µ–¥–∞—ë—à—å –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç, —á—Ç–æ–±—ã –æ–Ω–∞ –±—ã–ª–∞ –≤—ã–∑–≤–∞–Ω–∞ –ø–æ–∑–∂–µ:

```ts
function fetchData(callback: (data: string) => void) {
  setTimeout(() => {
    callback("hello");
  }, 1000);
}
```

–ù–æ —Ç–∞–∫–æ–π –∫–æ–¥:

* —Ç—è–∂–µ–ª–æ —á–∏—Ç–∞—Ç—å (–æ—Å–æ–±–µ–Ω–Ω–æ –≤–ª–æ–∂–µ–Ω–Ω—ã–π)
* —Å–ª–æ–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ (`try/catch` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
* —Ö—É–∂–µ —Ç–∏–ø–∏–∑–∏—Ä—É–µ—Ç—Å—è

---

## ‚úÖ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `async/await` –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ

```ts
function fetchData(): Promise<string> {
  return new Promise(resolve => {
    setTimeout(() => {
      resolve("hello");
    }, 1000);
  });
}

async function run() {
  const data = await fetchData(); // ‚úÖ –ø—Ä–æ—Å—Ç–æ–π, –ø–æ–Ω—è—Ç–Ω—ã–π –∫–æ–¥
  console.log(data);
}
```

---

## üß† –ö–∞–∫ —ç—Ç–æ —É–ª—É—á—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å —Ç–∏–ø–∞–º–∏

TypeScript **–ø–æ–Ω–∏–º–∞–µ—Ç —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ `Promise<T>`**, –∏ —Ç—ã –ø–æ–ª—É—á–∞–µ—à—å **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤**:

```ts
async function getUser(): Promise<{ id: number; name: string }> {
  return { id: 1, name: "Alice" };
}

async function showUser() {
  const user = await getUser(); // user: { id: number; name: string }
  console.log(user.name);       // ‚úÖ –≤—Å—ë —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
}
```

---

## üß± –ö–∞–∫ –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å –∫–æ–¥ —Å callback ‚Üí `async`

### –ë—ã–ª–æ:

```ts
function loadUser(callback: (err: Error | null, user?: string) => void) {
  // ...
}
```

### –°—Ç–∞–ª–æ:

```ts
function loadUser(): Promise<string> {
  return new Promise((resolve, reject) => {
    // ...
  });
}

const user = await loadUser();
```

---

## üßØ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–° callback‚Äô–∞–º–∏:

```ts
loadUser((err, user) => {
  if (err) {
    console.error(err);
    return;
  }
  console.log(user);
});
```

–° `async/await`:

```ts
try {
  const user = await loadUser();
  console.log(user);
} catch (err) {
  console.error("–û—à–∏–±–∫–∞:", err);
}
```

‚úÖ **–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `try/catch`, –∫–∞–∫ –≤ –æ–±—ã—á–Ω–æ–º —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –∫–æ–¥–µ.**

---

## üìå –†–µ–∑—é–º–µ

| –ë—ã–ª–æ (Callback)                  | –°—Ç–∞–ª–æ (async/await)                 |
| -------------------------------- | --------------------------------------- |
| –ú–Ω–æ–≥–æ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π          | –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π, —á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥          |
| –û—à–∏–±–∫–∏ ‚Äî —á–µ—Ä–µ–∑ `err` –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ | –û—à–∏–±–∫–∏ ‚Äî —á–µ—Ä–µ–∑ `try/catch`              |
| –ù–µ—Ç –≤—ã–≤–æ–¥–∞ —Ç–∏–ø–æ–≤                 | –¢–∏–ø `Promise<T>` ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥ |
| –°–ª–æ–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ü–µ–ø–æ—á–∫–∏      | –ü—Ä–æ—Å—Ç–æ –≤—ã–∑—ã–≤–∞—Ç—å `await` –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ   |

---

## üìö –°–æ–≤–µ—Ç—ã

* –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–π `Promise<T>` –∏–∑ `async`-—Ñ—É–Ω–∫—Ü–∏–π
* –û–±–æ—Ä–∞—á–∏–≤–∞–π —Å—Ç–∞—Ä—ã–µ `callback`-—Ñ—É–Ω–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ `new Promise(...)`
* –ò—Å–ø–æ–ª—å–∑—É–π `await` —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ `async`-—Ñ—É–Ω–∫—Ü–∏–π
* –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ `try/catch` –∏–ª–∏ `.catch(...)`

---
