# –†–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Ç–∏–ø–æ–≤ –Ω–∞ —Å—Ç–∞–¥–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–†–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Ç–∏–ø–æ–≤ –Ω–∞ —Å—Ç–∞–¥–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (runtime type reconstruction) –≤ TypeScript ‚Äî **–Ω–µ —Ç—Ä–∏–≤–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞**, –ø–æ—Ç–æ–º—É —á—Ç–æ TypeScript **—É–¥–∞–ª—è–µ—Ç —Ç–∏–ø—ã –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**. –¢–∏–ø—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç **—Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** –∏ –∏—Å—á–µ–∑–∞—é—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.

–ù–æ —Ç—ã –≤—Å—ë –∂–µ –º–æ–∂–µ—à—å *—Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø—ã –≤ —Ä–∞–Ω—Ç–∞–π–º–µ* —Å –ø–æ–º–æ—â—å—é –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–¥—Ö–æ–¥–æ–≤:

---

## üß† –ì–ª–∞–≤–Ω—ã–π –ø—Ä–∏–Ω—Ü–∏–ø:

> **TypeScript –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç runtime-—Ç–∏–ø–æ–≤.**
> –ß—Ç–æ–±—ã ¬´—Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞—Ç—å¬ª —Ç–∏–ø –Ω–∞ —Å—Ç–∞–¥–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è ‚Äî –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

* **–Ø–≤–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è —Å—Ö–µ–º**
* **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**
* **–ú–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã)**

---

## ‚úÖ –°–ø–æ—Å–æ–±—ã —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Ç–∏–ø–æ–≤

### 1. üì¶ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ + —Ç–∏–ø–∏–∑–∞—Ü–∏—è

–ü—Ä–∏–º–µ—Ä —Å [`zod`](https://github.com/colinhacks/zod):

```ts
import { z } from 'zod';

const UserSchema = z.object({
  id: z.string(),
  age: z.number().int(),
});

type User = z.infer<typeof UserSchema>; // ‚úÖ —Ç–∏–ø User –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∏–∑ runtime-—Å—Ö–µ–º—ã

const input = JSON.parse(someJSON);
const user = UserSchema.parse(input); // Runtime-–ø—Ä–æ–≤–µ—Ä–∫–∞ + TypeScript-—Ç–∏–ø–∏–∑–∞—Ü–∏—è
```

> –ó–¥–µ—Å—å —Å—Ö–µ–º–∞ –∑–∞–¥–∞—ë—Ç **runtime**-–ø–æ–≤–µ–¥–µ–Ω–∏–µ, –∏ TypeScript ¬´—Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∏—Ä—É–µ—Ç¬ª —Ç–∏–ø —á–µ—Ä–µ–∑ `z.infer`.

---

### 2. üß™ –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ–±—ä–µ–∫—Ç–æ–≤

```ts
function isUser(obj: any): obj is { name: string; age: number } {
  return typeof obj?.name === 'string' && typeof obj?.age === 'number';
}
```

–¢—ã –º–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –≤ —Ä–∞–Ω—Ç–∞–π–º–µ, —á—Ç–æ–±—ã "–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å" —Ç–∏–ø:

```ts
if (isUser(something)) {
  // TypeScript —Ç–µ–ø–µ—Ä—å –∑–Ω–∞–µ—Ç, —á—Ç–æ something ‚Äî —ç—Ç–æ User
  console.log(something.name);
}
```

---

### 3. üß© –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤ + Reflect Metadata

(–ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫–ª–∞—Å—Å–æ–≤ –∏ DI)

```ts
import 'reflect-metadata';

class User {
  constructor(
    public name: string,
    public age: number
  ) {}
}

function logParamTypes(target: any) {
  const types = Reflect.getMetadata('design:paramtypes', target);
  console.log(types); // [String, Number]
}

@logParamTypes
class Example {
  constructor(name: string, age: number) {}
}
```

> –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç **—Å—á–∏—Ç—ã–≤–∞—Ç—å —Ç–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –Ω–∞ —ç—Ç–∞–ø–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**, –µ—Å–ª–∏ —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å `emitDecoratorMetadata`.

---

## üîÑ –ò–¥–µ—è: —Ç–∏–ø ‚Üí —Å—Ö–µ–º–∞ ‚Üí –≤–∞–ª–∏–¥–∞—Ü–∏—è ‚Üí —Ç–∏–ø

–° TypeScript —ç—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–≤—É—Ö—Å—Ç–æ—Ä–æ–Ω–Ω–µ:

| –°–ø–æ—Å–æ–±                            | –°—Ç–∞–¥–∏—è       | –ß—Ç–æ –¥–∞—ë—Ç                       |
| --------------------------------- | ------------ | ------------------------------ |
| `zod`, `io-ts`, `yup`, `runtypes` | Runtime      | –°—Ö–µ–º–∞ + –ø—Ä–æ–≤–µ—Ä–∫–∞               |
| `z.infer<typeof schema>`          | Compile-time | –¢–∏–ø—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ö–µ–º            |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä—É—á–Ω—É—é (`isX()`)        | Runtime      | –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ narrowing |

---

## üìå –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞—Ç—å —Ç–∏–ø?

* –ü—Ä–∏ –ø—Ä–∏—ë–º–µ –¥–∞–Ω–Ω—ã—Ö **–∏–∑ JSON / API / —Ñ–∞–π–ª–∞**
* –î–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è **–≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤, —Ñ–æ—Ä–º, UI**
* –í DSL –∏–ª–∏ —Å–∏—Å—Ç–µ–º–∞—Ö –ø–ª–∞–≥–∏–Ω–æ–≤
* –í —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞—Ö —Å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞–º–∏ (`nestjs`, `class-validator`)

---

## üì¶ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞                              | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏                       |
| --------------------------------------- | --------------------------------- |
| `zod`                                   | –ü—Ä–æ—Å—Ç–∞—è, –±–µ–∑–æ–ø–∞—Å–Ω–∞—è, –ø–æ–ø—É–ª—è—Ä–Ω–∞—è   |
| `io-ts`                                 | –ú–æ—â–Ω–∞—è, –Ω–æ —Å–ª–æ–∂–Ω–µ–µ                |
| `runtypes`                              | –ü—Ä–æ—Å—Ç–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å                 |
| `superstruct`                           | –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è UI-–≤–∞–ª–∏–¥–∞—Ü–∏–∏ |
| `class-validator` + `class-transformer` | –î–ª—è –∫–ª–∞—Å—Å–æ–≤ (—á–∞—Å—Ç–æ –≤ `nestjs`)    |

---

## üèÅ –í—ã–≤–æ–¥

> TypeScript –Ω–µ –º–æ–∂–µ—Ç —Å–∞–º –ø–æ —Å–µ–±–µ ¬´—Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞—Ç—å¬ª —Ç–∏–ø –≤ runtime, –Ω–æ —Ç—ã –º–æ–∂–µ—à—å **—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å runtime-–≤–∞–ª–∏–¥–∞—Ü–∏—é –∏ —Ç–∏–ø—ã** —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏–ª–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ guards, —Å—Ö–µ–º—ã, –∏–ª–∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã.
